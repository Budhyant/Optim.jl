<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="JuliaNLSolvers">
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Contributing - Optim.jl</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../..">Optim.jl</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../..">Home</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">General information <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../user/minimization/">Minimizing a function</a>
</li>
                            
<li >
    <a href="../../user/config/">Configurable Options</a>
</li>
                            
<li >
    <a href="../../user/tipsandtricks/">Tips and tricks</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Algorithms <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
  <li class="dropdown-submenu">
    <a href="#">Solvers</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#">Gradient Free</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../algo/nelder_mead/">Nelder Mead</a>
</li>
            
<li >
    <a href="../../algo/simulated_annealing/">Simulated Annealing</a>
</li>
            
<li >
    <a href="../../algo/samin/">Simulated Annealing w/ bounds</a>
</li>
            
<li >
    <a href="../../algo/particle_swarm/">Particle Swarm</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Gradient Required</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../algo/cg/">Conjugate Gradient</a>
</li>
            
<li >
    <a href="../../algo/gradientdescent/">Gradient Descent</a>
</li>
            
<li >
    <a href="../../algo/lbfgs/">(L-)BFGS</a>
</li>
            
<li >
    <a href="../../algo/ngmres/">Acceleration</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Hessian Required</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../algo/newton/">Newton</a>
</li>
            
<li >
    <a href="../../algo/newton_trust_region/">Newton with Trust Region</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                            
<li >
    <a href="../../algo/autodiff/">Automatic Differentiation</a>
</li>
                            
<li >
    <a href="../../algo/linesearch/">Linesearch</a>
</li>
                            
<li >
    <a href="../../algo/precondition/">Preconditioners</a>
</li>
                            
<li >
    <a href="../../algo/complex/">Complex optimization</a>
</li>
                            
<li >
    <a href="../../algo/manifolds/">Manifolds</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contributing <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li class="active">
    <a href="./">Contributing</a>
</li>
                        </ul>
                    </li>
                    <li >
                        <a href="../../LICENSE/">License</a>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../../algo/manifolds/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../../LICENSE/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/JuliaNLSolvers/Optim.jl/edit/master/docs/dev/contributing.md"><i class="fa fa-github"></i> Edit on GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#notes-for-contributing">Notes for contributing</a></li>
            <li><a href="#things-to-consider">Things to consider</a></li>
            <li><a href="#adding-a-solver">Adding a solver</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p><a id='Notes-for-contributing-1'></a></p>
<h2 id="notes-for-contributing">Notes for contributing</h2>
<p>We are always happy to get help from people who normally do not contribute to the package. However, to make the process run smoothly, we ask you to read this page before creating your pull request. That way it is more probable that your changes will be incorporated, and in the end it will mean less work for everyone.</p>
<p><a id='Things-to-consider-1'></a></p>
<h3 id="things-to-consider">Things to consider</h3>
<p>When proposing a change to <code>Optim.jl</code>, there are a few things to consider. If you're in doubt feel free to reach out. A simple way to get in touch, is to join our <a href="https://gitter.im/JuliaNLSolvers/Optim.jl">gitter channel</a>.</p>
<p>Before submitting a pull request, please consider the following bullets:</p>
<ul>
<li>Did you remember to provide tests for your changes? If not, please do so, or ask for help.</li>
<li>Did your change add new functionality? Remember to add a section in the documentation.</li>
<li>Did you change existing code in a breaking way? Then remember to use Julia's deprecation tools to help users migrate to the new syntax.</li>
<li>Add a note in the NEWS.md file, so we can keep track of changes between versions.</li>
</ul>
<p><a id='Adding-a-solver-1'></a></p>
<h3 id="adding-a-solver">Adding a solver</h3>
<p>If you're contributing a new solver, you shouldn't need to touch any of the code in <code>src/optimize.jl</code>. You should rather add a file named (<code>solver</code> is the name of the solver) <code>solver.jl</code> in <code>src</code>, and make sure that you define an <code>Optimizer</code> subtype <code>struct Solver &lt;: Optimizer end</code> with appropriate fields, a default constructor with a keyword for each field, a state type that holds all variables that are (re)used throughout the iterative procedure, an <code>initial_state</code> that initializes such a state, and  an <code>update!</code> method that does the actual work. Say you want to contribute a solver called <code>Minim</code>, then your <code>src/minim.jl</code> file would look something like</p>
<div class="codehilite"><pre><span></span><span class="nx">struct</span> <span class="nx">Minim</span><span class="p">{</span><span class="nx">IF</span><span class="p">,</span> <span class="nx">F</span><span class="o">&lt;:</span><span class="nb">Function</span><span class="p">,</span> <span class="nx">T</span><span class="p">}</span> <span class="o">&lt;:</span> <span class="nx">Optimizer</span>
    <span class="nx">alphaguess</span><span class="o">!::</span><span class="nx">IF</span>
    <span class="nx">linesearch</span><span class="o">!::</span><span class="nx">F</span>
    <span class="nx">minim_parameter</span><span class="o">::</span><span class="nx">T</span>
<span class="nx">end</span>

<span class="nx">Minim</span><span class="p">(;</span> <span class="nx">alphaguess</span> <span class="o">=</span> <span class="nx">LineSearches</span><span class="p">.</span><span class="nx">InitialStatic</span><span class="p">(),</span> <span class="nx">linesearch</span> <span class="o">=</span> <span class="nx">LineSearches</span><span class="p">.</span><span class="nx">HagerZhang</span><span class="p">(),</span> <span class="nx">minim_parameter</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">=</span>
  <span class="nx">Minim</span><span class="p">(</span><span class="nx">linesearch</span><span class="p">,</span> <span class="nx">minim_parameter</span><span class="p">)</span>

<span class="nx">type</span> <span class="nx">MinimState</span><span class="p">{</span><span class="nx">T</span><span class="p">,</span><span class="nx">N</span><span class="p">,</span><span class="nx">G</span><span class="p">}</span>
  <span class="nx">x</span><span class="o">::</span><span class="nx">AbstractArray</span><span class="p">{</span><span class="nx">T</span><span class="p">,</span><span class="nx">N</span><span class="p">}</span>
  <span class="nx">x_previous</span><span class="o">::</span><span class="nx">AbstractArray</span><span class="p">{</span><span class="nx">T</span><span class="p">,</span><span class="nx">N</span><span class="p">}</span>
  <span class="nx">f_x_previous</span><span class="o">::</span><span class="nx">T</span>
  <span class="nx">s</span><span class="o">::</span><span class="nx">AbstractArray</span><span class="p">{</span><span class="nx">T</span><span class="p">,</span><span class="nx">N</span><span class="p">}</span>
  <span class="kd">@add_linesearch_fields</span><span class="p">()</span>
<span class="nx">end</span>

<span class="kd">function</span> <span class="nx">initial_state</span><span class="p">(</span><span class="nx">method</span><span class="o">::</span><span class="nx">Minim</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">initial_x</span><span class="p">)</span>
<span class="err">#</span> <span class="nx">prepare</span> <span class="nx">cache</span> <span class="nx">variables</span> <span class="nx">etc</span> <span class="nx">here</span>

<span class="nx">end</span>

<span class="kd">function</span> <span class="nx">update</span><span class="o">!</span><span class="p">{</span><span class="nx">T</span><span class="p">}(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">state</span><span class="o">::</span><span class="nx">MinimState</span><span class="p">{</span><span class="nx">T</span><span class="p">},</span> <span class="nx">method</span><span class="o">::</span><span class="nx">Minim</span><span class="p">)</span>
    <span class="err">#</span> <span class="nx">code</span> <span class="k">for</span> <span class="nx">Minim</span> <span class="nx">here</span>
    <span class="kc">false</span> <span class="err">#</span> <span class="nx">should</span> <span class="nx">the</span> <span class="nx">procedure</span> <span class="nx">force</span> <span class="nx">quit</span><span class="o">?</span>
<span class="nx">end</span>
</pre></div></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '../..';</script>
        <script src="../../js/base.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_HTML"></script>
        <script src="../../assets/mathjaxhelper.js"></script>
        <script src="../../search/require.js"></script>
        <script src="../../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
